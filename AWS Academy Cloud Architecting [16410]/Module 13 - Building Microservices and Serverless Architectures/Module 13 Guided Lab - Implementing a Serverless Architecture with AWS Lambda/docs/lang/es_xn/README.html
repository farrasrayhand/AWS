<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>README</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' />
<!-- Font Awesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
<style type="text/css">
    #ssb_alexa_blue {
        background-color: #3366ff;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #3366ff;
        border-radius: 2px;
        white-space: nowrap
    }
    #ssb_alexa_ocean {
        background-color: #00a0d2;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #00a0d2;
        white-space: nowrap
    }
    #ssb_alexa_sand {
        background-color: #f2f2f2;
        font-weight: bold;
        font-size: 90%;
        color: #00a0d2;
        position: relative;
        top: -1px;
        border-color: #dcdcdc;
        border-style: solid;
        border-width: 2px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_alexa_white {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #00a0d2;
        position: relative;
        top: -1px;
        border-color: #00a0d2;
        border-style: solid;
        border-width: 2px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_blue {
        background-color: #257ACF;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        border-radius: 5px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_catalog_orange {
        background-color: #E36000;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        border-radius: 1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_catalog_red {
        background-color: #D90000;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        border-radius: 5px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_dark_blue {
        color: white;
        background-color: darkblue;
        border-radius: 3px;
        padding: 0px 6px;
        white-space: nowrap
    }
    #ssb_grafana_blue {
        background-color: #00678b;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #00678b;
        border-radius: 2px;
        white-space: nowrap
    }
    #ssb_grafana_green {
        background-color: #629300;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #629300;
        border-radius: 2px;
        white-space: nowrap
    }
    #ssb_grafana_orange {
        background-color: #ec8427;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #ec8427;
        border-radius: 2px;
        white-space: nowrap
    }
    #ssb_grey {
        background-color: #DEDEDE;
        font-weight: bold;
        font-size: 90%;
        color: #444;
        position: relative;
        top: -1px;
        border-radius: 5px;
        border-width: 1px;
        border-style: solid;
        border-color: #444;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_grey_square {
        background-color: #DEDEDE;
        font-weight: bold;
        font-size: 90%;
        color: #444;
        position: relative;
        top: -1px;
        border-radius: 1px;
        border-width: 1px;
        border-style: solid;
        border-color: #444;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_iot_blue {
        background-color: #00A1C9;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #00A1C9;
        border-radius: 2px;
        white-space: nowrap
    }
    #ssb_iot_grey {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: gray;
        position: relative;
        top: -1px;
        border-color: gray;
        border-radius: 2px;
        border-style: solid;
        border-width: 1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_iot_white {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #00A1C9;
        position: relative;
        top: -1px;
        border-color: #00A1C9;
        border-radius: 2px;
        border-style: solid;
        border-width: 1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_kibana_blue {
        background-color: #0079a5;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #0079a5;
        border-radius: 2px;
        white-space: nowrap
    }
    #ssb_kibana_white {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #0079a5;
        position: relative;
        top: -1px;
        border-color: #0079a5;
        border-radius: 2px;
        border-width: 1px;
        border-style: solid;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_lambda_orange {
        background-color: #ec7211;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_lambda_white {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #545b64;
        position: relative;
        top: -1px;
        border-color: #545b64;
        border-radius: 2px;
        border-width: 1px;
        border-style: solid;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_maroon {
        color: white;
        background-color: darkred;
        border-radius: 3px;
        padding: 0px 6px;
        white-space: nowrap
    }
    #ssb_orange {
        background-color: #ec7211;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssl_orange {
        color: #ec7211;
        font-weight: bold
    }
    #ssb_orange_oval {
        background-color: #ec7211;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-radius: 20px;
        white-space: nowrap
    }
    #ssb_oval {
        background-color: #DEDEDE;
        font-weight: bold;
        font-size: 90%;
        color: #444;
        position: relative;
        top: -1px;
        border-radius: 20px;
        border-width: 1px;
        border-style: solid;
        border-color: #444;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
    }
    #ssb_start_lab {
        background-color: #34A853;
        font-weight: bold;
        font-size: 90%;
        color: white;
        border-radius: 2px;
        padding-left: 10px;
        padding-right: 10px;
        padding-top: 3px;
        padding-bottom: 3px
    }
    #ssb_open_console {
        background-color: white;
        font-family: Google Sans;
        font-weight: bold;
        font-size: 90%;
        color: #1a73e8;
        border-color: #dadce0;
        border-radius: 4px;
        border-width: 2px;
        border-style: solid;
        outline-color: #ffffff;
        padding-top: 5px;
        padding-bottom: 5px;
        padding-left: 10px;
        padding-right: 10px
    }
    #ssb_rds_white {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #545b64;
        position: relative;
        top: -1px;
        border-color: #545b64;
        border-radius: 2px;
        border-width: 1px;
        border-style: solid;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
    }
    #ssb_red {
        background-color: #D93025;
        font-weight: bold;
        font-size: 90%;
        color: white;
        border-radius: 2px;
        padding-left: 10px;
        padding-right: 10px;
        padding-top: 3px;
        padding-bottom: 3px
    }
    #ssb_red_oval {
        background-color: #D93025;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-radius: 20px;
        white-space: nowrap
    }
    #ssb_s3_blue {
        background-color: #329AD6;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
    }
    #ssb_s3_white {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #329AD6;
        position: relative;
        top: -1px;
        border-color: #329AD6;
        border-width: 1px;
        border-style: solid;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
    }
    #ssb_services {
        background-color: #232f3e;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
    }
    #ssb_square_lex {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #1166bb;
        position: relative;
        top: -1px;
        border-color: #c4cbcd;
        border-style: solid;
        border-width: 2px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px
    }
    #ssb_ssm_white {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #545b64;
        position: relative;
        top: -1px;
        border-color: #545b64;
        border-radius: 2px;
        border-width: 1px;
        border-style: solid;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
    }
    #ssb_white {
        background-color: white;
        font-weight: bold;
        font-size: 90%;
        color: #545b64;
        position: relative;
        top: -1px;
        border-color: #545b64;
        border-radius: 2px;
        border-width: 1px;
        border-style: solid;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
    }
    #ssbox_cloudformation_blue {
        font-weight: bold;
        background-color: #f1faff;
        font-size: 90%;
        border-color: #00A1C9;
        border-width: 1px;
        border-style: solid;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
    }
    #ssl_alexa_ocean {
        color: #00a0d2;
        font-weight: bold
    }
    #ssl_blue {
        color: #1166bb;
        font-weight: bold
    }
    #ssl_catalog_orange {
        color: #E16706;
        font-weight: bold
    }
    #ssb_codestar_blue {
        background-color: #329AD6;
        font-weight: bold;
        font-size: 80%;
        color: white;
        position: relative;
        top: -1px;
        border-radius: 1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        white-space: nowrap
    }
    #ssb_cognito_blue {
        background-color: #2a7fd4;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #0055aa;
        border-radius: 2px;
        white-space: nowrap
    }
    #ssb_eb_blue {
        background-color: #0f6dca;
        font-weight: bold;
        font-size: 90%;
        color: white;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #0055aa;
        border-width: 1px;
        border-style: solid;
        border-radius: 4px;
        white-space: nowrap;
    }
    #ssb_eb_grey {
        background-color: #e5e5e5;
        font-weight: bold;
        font-size: 90%;
        color: 444444;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: #bbbbbb;
        border-width: 1px;
        border-style: solid;
        border-radius: 4px;
        white-space: nowrap
    }
    #ssb_voc_grey {
        background-color: #F2F3F4;
        font-size: 90%;
        color: black;
        position: relative;
        top: -1px;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 10px;
        padding-right: 10px;
        border-color: grey;
        border-width: 1px;
        border-style: solid;
        white-space: nowrap
    }
</style>
<style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; tab-size: 4; background-position: inherit inherit; background-repeat: inherit inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) { 
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror-linenumber { }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit inherit; background-repeat: inherit inherit; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; background-position: 0px 0px; background-repeat: initial initial; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print { 
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; background-position: initial initial; background-repeat: initial initial; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background-color: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; background-position: initial initial; background-repeat: initial initial; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { white-space: pre !important; border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; text-shadow: initial !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); background-position: initial initial; background-repeat: initial initial; }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }
@media print { 
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

 .typora-export li, .typora-export p, .typora-export,  .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='módulo-13----laboratorio-guiado 2-implementación-de-una-arquitectura-sin-servidor-en-aws'><span>Módulo 13 – Laboratorio guiado 2: Implementación de una arquitectura sin servidor en AWS</span></h1><h2 id='caso'><span>Caso</span></h2><p><span>Va a crear un sistema de seguimiento de inventario. Almacenes de todo el mundo subirán archivos de inventario a Amazon S3. Su equipo quiere poder ver los niveles de inventario y enviar una notificación cuando estén bajos.</span></p><p><span>En este laboratorio, realizará lo siguiente:</span></p><ul><li><em><span>Cargará</span></em><span> un </span><em><span>archivo de inventario</span></em><span> a un bucket de Amazon S3.</span></li><li><span>Esta carga </span><em><span>activará una función de Lambda</span></em><span> que leerá el archivo e insertará los artículos en una </span><em><span>tabla de Amazon DynamoDB</span></em><span>.</span></li><li><span>Una aplicación de panel basada en la web y sin servidor utilizará Amazon Cognito para autenticarse en AWS y, luego, obtendrá acceso a la tabla de DynamoDB a fin de mostrar los niveles de inventario.</span></li><li><span>Otra función de Lambda recibirá las actualizaciones de la tabla de DynamoDB y enviará un mensaje a un </span><em><span>tema de SNS</span></em><span> cuando un artículo del inventario esté agotado.</span></li><li><span>A continuación, Amazon SNS </span><em><span>le enviará una notificación a través del servicio de mensajes cortos (SMS) o de email</span></em><span> que solicitará inventario adicional.</span></li></ul><br><h2 id='información-general-del-laboratorio'><span>Información general del laboratorio</span></h2><p><span>Tradicionalmente, las aplicaciones se ejecutan en servidores. Estos servidores pueden ser físicos (o sin sistema operativo) o, también, pueden ser entornos virtuales que se ejecutan encima de servidores físicos. Sin embargo, debe comprar y aprovisionar todos estos tipos de servidores, además de administrar su capacidad. En cambio, puede ejecutar su código en AWS Lambda sin necesidad de preasignar servidores. Con Lambda, solo necesita proporcionar el código y definir un desencadenador. La función de Lambda puede ejecutarse cuando se necesite, ya sea una vez por semana o cientos de veces por segundo. Solo pagará lo que utilice.</span></p><p><span>En este laboratorio, se demuestra cómo activar una función de Lambda cuando se carga un archivo en Amazon Simple Storage Service (Amazon S3). El archivo se cargará en una tabla de Amazon DynamoDB. Los datos estarán disponibles para que pueda verlos en una página de panel que recupera los datos directamente de DynamoDB. Esta solución </span><em><span>no utiliza Amazon Elastic Compute Cloud (Amazon EC2)</span></em><span>. Se trata de una </span><em><span>solución sin servidor</span></em><span> que </span><em><span>escala automáticamente cuando se la utiliza</span></em><span>. Además, genera </span><em><span>costos bajos</span></em><span> cuando está en uso y, cuando está inactiva, </span><em><span>prácticamente no genera costos</span></em><span> porque solo se le factura el almacenamiento de datos.</span></p><p>&nbsp;</p><p><span>Después de completar este laboratorio, debería ser capaz de lo siguiente:</span></p><ul><li><span>Implementar una arquitectura sin servidor en AWS</span></li><li><span>Activar funciones de Lambda desde Amazon S3 y Amazon DynamoDB</span></li><li><span>Configurar Amazon Simple Notification Service (Amazon SNS) para que envíe notificaciones</span></li></ul><p>&nbsp;</p><p><span>Cuando </span><strong><span>termine</span></strong><span> este laboratorio, la arquitectura se verá como en el siguiente ejemplo:</span></p><p><img src="images/module-13-guided-lab-architecture.png" referrerpolicy="no-referrer" alt="Flujo de trabajo"></p><br><h2 id='duración'><span>Duración</span></h2><p><span>La duración estimada de este laboratorio es de </span><strong><span>40 minutos</span></strong><span> aproximadamente.</span></p><br><h2 id='restricciones-de-los-servicios-de-aws'><span>Restricciones de los servicios de AWS</span></h2><p><span>En este entorno de laboratorio, el acceso a los servicios y las acciones de los servicios de AWS puede restringirse a los que se necesiten para cumplir las instrucciones del laboratorio. Es posible que se produzcan errores si intenta acceder a otros servicios o hacer acciones que no sean las que se describen en este laboratorio.</span></p><br><h2 id='acceso-a-la-consola-de-administración-de-aws'><span>Acceso a la consola de administración de AWS</span></h2><ol start='' ><li><p><span>En la parte superior de estas instrucciones, elija </span><span id="ssb_voc_grey"><span>Start Lab</span></span><span> (Iniciar laboratorio) y comience a trabajar en él.</span></p><p><span>Se abrirá el panel </span><strong><span>Start Lab</span></strong><span> (Iniciar laboratorio), donde se muestra el estado del laboratorio.</span></p><p><i class="fas fa-info-circle"></i><span> </span><strong><span>Sugerencia</span></strong><span>: Si necesita más tiempo para completar el laboratorio, vuelva a hacer clic en el botón </span><span id="ssb_voc_grey"><span>Start Lab</span></span><span> (Iniciar laboratorio) para reiniciar el temporizador del entorno.</span></p></li><li><p><span>Espere hasta que el panel </span><strong><span>Start Lab</span></strong><span> (Iniciar laboratorio) muestre el mensaje </span><em><span>Lab Status: ready (Estado del laboratorio: listo)</span></em><span> y, luego, cierre el panel haciendo clic en la </span><strong><span>X</span></strong><span>.</span></p></li><li><p><span>En la parte superior de estas instrucciones, elija </span><span id="ssb_voc_grey"><span>AWS</span></span><span>.</span></p><p><span>Con esta acción, se abrirá la consola de administración de AWS en una nueva pestaña del navegador, y el sistema iniciará su sesión de forma automática.</span></p><p><i class="fas fa-exclamation-triangle"></i><span> </span><strong><span>Sugerencia</span></strong><span>: Si no se abre una nueva pestaña del navegador, por lo general habrá un aviso o un icono en la parte superior, el cual indicará que el navegador impide que el sitio abra ventanas emergentes. Haga clic en el aviso o el icono y elija </span><strong><span>Allow pop ups</span></strong><span> (Permitir ventanas emergentes).</span></p></li><li><p><span>Ubique la pestaña de la </span><strong><span>consola de administración de AWS</span></strong><span> de modo que aparezca junto con estas instrucciones. El método más óptimo sería tener ambas pestañas del navegador abiertas al mismo tiempo para que pueda seguir los pasos del laboratorio más fácilmente.</span></p><p><i class="fas fa-exclamation-triangle"></i><span> </span><strong><span>No cambie la región a menos que se le indique expresamente que debe hacerlo</span></strong><span>.</span></p></li></ol><br><h2 id='tarea 1-crear-una-función-de-lambda-para-cargar-datos'><span>Tarea 1: Crear una función de Lambda para cargar datos</span></h2><p><span>En esta tarea, creará </span><em><span>una función de Lambda</span></em><span> que procesará un archivo de inventario. La función de Lambda leerá el archivo e insertará la información en una tabla DynamoDB.</span></p><p><img src="images/module-13-guided-lab-task-1.png" referrerpolicy="no-referrer" alt="Función de Lambda"></p><ol start='5' ><li><p><span>En la </span><strong><span>consola de administración de AWS</span></strong><span>, en el menú </span><span id="ssb_services"><span>Services (Servicios)</span><i class="fas fa-angle-down"></i></span><span>, elija </span><strong><span>Lambda</span></strong><span>.</span></p></li><li><p><span>Elija </span><span id="ssb_lambda_orange"><span>Create function</span></span><span> (Crear función).</span></p><p><i class="fas fa-info-circle"></i><span> </span><em><span>Los proyectos</span></em><span> son plantillas de código para escribir funciones de Lambda. Dichos proyectos se proporcionan para los desencadenadores estándar de Lambda, como la creación de habilidades de Amazon Alexa y el procesamiento de las secuencias de Amazon Kinesis Data Firehose. En este laboratorio, se le ofrece una función de Lambda preescrita, por lo que utilizará la opción </span><strong><span>Author from scratch</span></strong><span> (Crear desde cero).</span></p></li><li><p><span>Realice las siguientes configuraciones:</span></p><ul><li><strong><span>Function name</span></strong><span> (Nombre de la función): </span><code>Load-Inventory</code></li><li><strong><span>Runtime</span></strong><span> (Tiempo de ejecución): </span><em><span>Python 3.7</span></em></li><li><span>Amplíe </span><i class="fas fa-caret-right"></i><span> </span><strong><span>Choose or create an execution role</span></strong><span> (Elegir o crear un rol de ejecución).</span></li><li><strong><span>Execution role</span></strong><span> (Rol de ejecución): </span><em><span>Use an existing role (Utilizar un rol existente)</span></em></li><li><strong><span>Existing role:</span></strong><span> (Rol existente): </span><em><span>Lambda-Load-Inventory-Role</span></em></li></ul><p><span>Este rol otorga permisos a la función de Lambda para que pueda acceder a Amazon S3 y a DynamoDB.</span></p></li><li><p><span>Elija </span><span id="ssb_lambda_orange"><span>Create function</span></span><span> (Crear función).</span></p></li><li><p><span>Desplácese hacia abajo hasta la sección </span><strong><span>Function code</span></strong><span> (Código de la función) y, luego, elimine todo el código que aparece en el editor de código.</span></p></li><li><p><span>En el editor del </span><strong><span>Function code</span></strong><span> (Código de la función), copie el siguiente código:</span></p></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Load-Inventory Lambda function</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># This function is triggered by an object being created in an Amazon S3 bucket.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># The file is downloaded and each line is inserted into a DynamoDB table.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">import json, urllib, boto3, csv</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Connect to S3 and DynamoDB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">s3 <span class="cm-operator">=</span> boto3.resource(<span class="cm-string">'s3'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">dynamodb <span class="cm-operator">=</span> boto3.resource(<span class="cm-string">'dynamodb'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Connect to the DynamoDB tables</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">inventoryTable <span class="cm-operator">=</span> dynamodb.Table(<span class="cm-string">'Inventory'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># This handler is run every time the Lambda function is triggered</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">def lambda_handler(event, context):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># Show the incoming event in the debug log</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  print(<span class="cm-string">"Event received by Lambda function: "</span> <span class="cm-operator">+</span> json.dumps(event, <span class="cm-def">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># Get the bucket and object key from the Event</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  bucket <span class="cm-operator">=</span> event[<span class="cm-string">'Records'</span>][0][<span class="cm-string">'s3'</span>][<span class="cm-string">'bucket'</span>][<span class="cm-string">'name'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  key <span class="cm-operator">=</span> urllib.parse.unquote_plus(event[<span class="cm-string">'Records'</span>][0][<span class="cm-string">'s3'</span>][<span class="cm-string">'object'</span>][<span class="cm-string">'key'</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  localFilename <span class="cm-operator">=</span> <span class="cm-string">'/tmp/inventory.txt'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># Download the file from S3 to the local filesystem</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  try:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  s3.meta.client.download_file(bucket, key, localFilename)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  except Exception as e:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  print(e)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  print(<span class="cm-string">'Error getting object {} from bucket {}. Make sure they exist and your bucket is in the same region as this function.'</span>.format(key, bucket))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  raise e</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># Read the Inventory CSV file</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  with open(localFilename) as csvfile:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  reader <span class="cm-operator">=</span> csv.DictReader(csvfile, <span class="cm-def">delimiter</span><span class="cm-operator">=</span><span class="cm-string">','</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># Read each row in the file</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  rowCount <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> row <span class="cm-keyword">in</span> reader:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  rowCount <span class="cm-operator">+=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Show the row in the debug log</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  print(row[<span class="cm-string">'store'</span>], row[<span class="cm-string">'item'</span>], row[<span class="cm-string">'count'</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  try:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Insert Store, Item and Count into the Inventory table</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  inventoryTable.put_item(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">Item</span><span class="cm-operator">=</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'Store'</span>:  row[<span class="cm-string">'store'</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'Item'</span>: &nbsp; row[<span class="cm-string">'item'</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'Count'</span>:  int(row[<span class="cm-string">'count'</span>])})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  except Exception as e:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; print(e)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; print(<span class="cm-string">"Unable to insert data into DynamoDB table"</span>.format(e))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># Finished!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  return <span class="cm-string">"%d counts inserted"</span> % rowCount</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1053px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1053px;"></div></div></div></pre><p><span>Examine el código. Este realiza los siguientes pasos:</span></p><ul><li><span>Descarga el archivo de Amazon S3 que desencadenó el evento.</span></li><li><span>Ejecuta un bucle en cada línea del archivo.</span></li><li><span>Inserta los datos en la tabla </span><em><span>Inventory (Inventario)</span></em><span> de DynamoDB.</span></li></ul><ol start='11' ><li><span>En la parte superior de la página, elija </span><span id="ssb_lambda_orange"><span>Save</span></span><span> (Guardar).</span></li></ol><p><span>   A continuación, deberá configurar Amazon S3 para activar la función de Lambda cuando se cargue un archivo.</span></p><br><h2 id='tarea 2-configurar-un-evento-de-amazon s3'><span>Tarea 2: Configurar un evento de Amazon S3</span></h2><p><span>Almacenes de todo el mundo proporcionan archivos de inventario para cargar en el sistema de seguimiento de inventario. En lugar de cargar sus archivos por medio del protocolo de transferencia de archivos (FTP), los almacenes pueden cargarlos directamente en Amazon S3. Pueden cargar los archivos a través de una página web, un script o como parte de un programa. Cuando se recibe un archivo, este desencadena la función de Lambda. Luego, esta función de Lambda cargará el inventario en la tabla de DynamoDB.</span></p><p><img src="images/module-13-guided-lab-task-2.png" referrerpolicy="no-referrer" alt="Función de Lambda"></p><p><span>En esta tarea, creará un bucket de S3 y lo configurará para que active la función de Lambda.</span></p><ol start='12' ><li><span>En el menú </span><span id="ssb_services"><span>Services (Servicios)</span><i class="fas fa-angle-down"></i></span><span>, elija </span><strong><span>S3</span></strong><span>.</span></li><li><span>Elija </span><span id="ssb_s3_blue"><i class="fas fa-plus"></i><span>Create bucket (Crear bucket)</span></span></li></ol><p><span>   Cada bucket debe tener un nombre único, por lo que agregará un número aleatorio al nombre del bucket. Por ejemplo: </span><em><span>inventory-123</span></em><span>.</span></p><ol start='14' ><li><span>Para </span><strong><span>Bucket name</span></strong><span> (Nombre del bucket), escriba </span><code>inventory-&lt;number&gt; (inventario-&lt;número&gt;)</code><span> (reemplace </span><em><number></em><span> por un número aleatorio)</span></li><li><span>Elija </span><span id="ssb_s3_white"><span>Create bucket (Crear bucket)</span></span></li></ol><p><span>   </span><i class="fas fa-comment"></i><span> Es posible que reciba un error que indique lo siguiente: </span><em><span>The requested bucket name is not available (El nombre de bucket solicitado no está disponible)</span></em><span>. Si aparece este error, elija el primer enlace </span><strong><span>Edit</span></strong><span> (Editar), cambie el nombre del bucket e inténtelo de nuevo hasta que se acepte el nombre.</span></p><p><span>   Ahora, configurará el bucket para que la función de Lambda se active automáticamente cuando se cargue un archivo.</span></p><ol start='16' ><li><span>Elija el nombre de su bucket </span><em><span>inventory-</span><number><span>(inventario-)</span></em><span>.</span></li><li><span>Elija la pestaña </span><strong><span>Properties</span></strong><span> (Propiedades).</span></li><li><span>Desplácese hacia abajo hasta </span><strong><span>Advanced settings</span></strong><span> (Configuración avanzada) y, luego, haga clic en </span><strong><span>Events</span></strong><span> (Eventos).</span></li></ol><p><span>   Deberá configurar un evento para que se active cuando se cree un objeto en el bucket de S3.</span></p><ol start='19' ><li><span>Haga clic en </span><span style="color:#00a0d2"><i class="fas fa-plus"></i><span> Add notification (Agregar notificación)</span></span><span> y, luego, establezca los siguientes ajustes:</span></li></ol><ul><li><strong><span>Name</span></strong><span> (Nombre): </span><code>Load-Inventory (Cargar-Inventario)</code></li><li><strong><span>Eventos</span></strong><span> (Eventos): </span><i class="far fa-check-square"></i><span> </span><em><span>All object create events (Todos los eventos de creación de objetos)</span></em></li><li><strong><span>Send to</span></strong><span> (Enviar a): </span><em><span>Lambda Function (Función de Lambda)</span></em></li><li><strong><span>Lambda:</span></strong><span> </span><em><span>Load-Inventory (Cargar-Inventario)</span></em></li><li><span>Elija </span><span id="ssb_s3_blue"><span>Save (Guardar)</span></span><span>.</span></li></ul><p><span>   Esta configuración indica a Amazon S3 que, cuando se cree un objeto en el bucket, active la función de Lambda </span><em><span>Load-Inventory (Cargar-Inventory)</span></em><span> que creó anteriormente.</span></p><p><span>   El bucket ya está listo para recibir archivos de inventario.</span></p><br><h2 id='tarea 3-probar-el-proceso-de-carga'><span>Tarea 3: Probar el proceso de carga</span></h2><p><span>Ahora está listo para probar el proceso de carga. Cargará un archivo de inventario y, a continuación, revisará que se haya cargado con éxito.</span></p><p><img src="images/module-13-guided-lab-task-3-1.png" referrerpolicy="no-referrer" alt="Prueba de carga"></p><ol start='20' ><li><p><span>Descargue los archivos de inventario abriendo el menú contextual (haciendo clic con el botón derecho) de los siguientes enlaces:</span></p><p><a href='../../../scripts/inventory-berlin.csv'><span>inventory-berlin.csv</span></a></p><p><a href='../../../scripts/inventory-calcutta.csv'><span>inventory-calcutta.csv</span></a></p><p><a href='../../../scripts/inventory-karachi.csv'><span>inventory-karachi.csv</span></a></p><p><a href='../../../scripts/inventory-pusan.csv'><span>inventory-pusan.csv</span></a></p><p><a href='../../../scripts/inventory-shanghai.csv'><span>inventory-shanghai.csv</span></a></p><p><a href='../../../scripts/inventory-springfield.csv'><span>inventory-springfield.csv</span></a></p></li></ol><p>&nbsp;</p><p><span>Estos archivos son los archivos de inventario que puede utilizar para probar el sistema. Son archivos de valores separados por comas (CSV). El siguiente ejemplo muestra el contenido del archivo Berlín:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="plain"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="plain"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  store,item,count</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Berlin,Echo Dot,12</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Berlin,Echo (2nd Gen),19</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Berlin,Echo Show,18</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Berlin,Echo Plus,0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Berlin,Echo Look,10</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Berlin,Amazon Tap,15</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div><div class="CodeMirror-gutters" style="display: none; height: 157px;"></div></div></div></pre><ol start='21' ><li><span>En la consola, regrese al bucket de S3 haciendo clic en la pestaña </span><strong><span>Overview</span></strong><span> (Información general).</span></li><li><span>Seleccione </span><span id="ssb_s3_blue"><i class="fas fa-upload"></i><span>Upload (Cargar)</span></span><span> y cargue uno de los archivos CSV en el bucket. (Puede elegir cualquier archivo de inventario).</span></li></ol><p><span>   Amazon S3 activará la función de Lambda de manera automática y esta cargará los datos en una tabla de DynamoDB.</span></p><p><span>   Se le ha proporcionado una aplicación de panel sin servidor para que pueda ver los resultados.</span></p><ol start='23' ><li><span>En la parte superior de estas instrucciones, elija el botón </span><strong><span>Details</span></strong><span> (Detalles) y seleccione el botón </span><strong><span>Show</span></strong><span> (Mostrar) que está a la derecha de </span><strong><span>AWS</span></strong><span>.</span></li><li><span>En la ventana </span><strong><span>Credentials</span></strong><span> (Credenciales), copie la dirección URL del </span><strong><span>Dashboard</span></strong><span> (Panel).</span></li><li><span>Abra una nueva pestaña del navegador web, pegue la URL y presione INTRO.</span></li></ol><p><span>   La aplicación de panel se abrirá y mostrará los datos de inventario que cargó en el bucket. Los datos se recuperarán desde DynamoDB, lo que demostrará que la carga activó correctamente la función de Lambda.</span></p><p><img src="images/module-13-guided-lab-task-3-2.png" referrerpolicy="no-referrer" alt="Panel"></p><p>&nbsp;</p><p><i class="fas fa-exclamation-triangle"></i><span> Si la aplicación de panel no muestra ninguna información, pídale a su instructor que lo ayude a diagnosticar el problema.</span></p><p><span>La aplicación de panel se sirve como una página web estática de Amazon S3. El panel se autentica mediante Amazon Cognito como un </span><em><span>anonymous user (usuario anónimo)</span></em><span>, lo que proporciona los permisos suficientes para que el panel recupere los datos de DynamoDB.</span></p><p><span>También puede ver los datos directamente en la tabla de DynamoDB.</span></p><ol start='26' ><li><span>En el menú </span><span id="ssb_services"><span>Services (Servicios)</span><i class="fas fa-angle-down"></i></span><span>, elija </span><strong><span>DynamoDB</span></strong><span>.</span></li><li><span>En el panel de navegación izquierdo, elija </span><strong><span>Tables</span></strong><span> (Tablas).</span></li><li><span>Elija la tabla </span><strong><span>Inventory</span></strong><span> (Inventario).</span></li><li><span>Elija la pestaña </span><strong><span>Items</span></strong><span> (Artículos).</span></li></ol><p><span>   Se mostrarán los datos del archivo de inventario: el almacén, el artículo y el recuento de inventario.</span></p><br><h2 id='tarea 4-configurar-las-notificaciones'><span>Tarea 4: Configurar las notificaciones</span></h2><p><span>Es necesario notificar al personal encargado de la administración del inventario cuando un almacén se quede sin existencias de un artículo. Para esta funcionalidad de notificación sin servidor, usará </span><strong><span>Amazon SNS</span></strong><span>.</span></p><p><img src="images/module-13-guided-lab-task-4.png" referrerpolicy="no-referrer" alt="Prueba de carga"></p><p><span>Amazon SNS es un servicio de publicación/suscripción de mensajería y generación de notificaciones móviles flexible y completamente administrado. Entrega mensajes a los puntos de enlace y los clientes que se suscriben. Con Amazon SNS, puede enviar mensajes a un gran número de suscriptores, incluidos sistemas y servicios distribuidos, además de dispositivos móviles.</span></p><ol start='30' ><li><p><span>En el menú </span><span id="ssb_services"><span>Services (Servicios)</span><i class="fas fa-angle-down"></i></span><span>, haga clic en </span><strong><span>Simple Notification Service</span></strong><span>.</span></p></li><li><p><span>En el cuadro </span><strong><span>Create topic</span></strong><span> (Crear tema), para </span><strong><span>Topic name</span></strong><span> (Nombre del tema), escriba </span><code>NoStock (sin stock)</code><span>.</span></p></li><li><p><span>Elija </span><span id="ssb_orange"><span>Next step</span></span><span> (Paso siguiente).</span></p></li><li><p><span>Desplácese hasta el final de la página.</span></p></li><li><p><span>Elija </span><span id="ssb_orange"><span>Create topic</span></span><span> (Crear tema).</span></p><p><span>Para recibir notificaciones, debe </span><em><span>suscribirse</span></em><span> al tema. Puede elegir recibir notificaciones a través de varios métodos, como SMS e email.</span></p></li><li><p><span>En la mitad inferior de la página, haga clic en </span><span id="ssb_orange"><span>Create subscription</span></span><span> (Crear suscripción) y configure lo siguiente:</span></p></li></ol><ul><li><strong><span>Protocol</span></strong><span> (Protocolo): </span><em><span>SMS</span></em></li><li><strong><span>Endpoint</span></strong><span> (Punto de enlace): escriba su número de teléfono móvil en formato internacional (por ejemplo: </span><em><span>+14155550135</span></em><span> o </span><em><span>+9175550190</span></em><span>)</span></li><li><span>Elija </span><span id="ssb_orange"><span>Create subscription</span></span><span> (Crear suscripción)</span></li></ul><p><i class="fas fa-comment"></i><span> Si no desea recibir mensajes SMS, puede suscribirse a través de </span><em><span>email</span></em><span>. Debe proporcionar una dirección de email a la que pueda acceder mientras trabaja en este laboratorio. Después de crear una suscripción por email, recibirá un email de confirmación. Abra el mensaje y elija el enlace </span><em><span>Confirm subscription (Confirmar suscripción)</span></em><span>.</span></p><p><span>Cualquier mensaje que se envíe al tema de SNS se le reenviará por SMS o por email.</span></p><br><h2 id='tarea 5-crear-una-función-de-lambda-para-enviar-notificaciones'><span>Tarea 5: Crear una función de Lambda para enviar notificaciones</span></h2><p><span>Usted podría modificar la función existente de Lambda </span><em><span>Load-Inventory</span></em><span> (Cargar-Inventario) para que compruebe los niveles de inventario mientras se carga el archivo. Sin embargo, esta configuración no es una buena práctica de arquitectura. En lugar de sobrecargar la función </span><em><span>Load-Inventory</span></em><span> (Cargar-Inventario) con lógica de negocio, creará otra función de Lambda que se activará cuando se carguen datos en la tabla de DynamoDB. A esta función la activará una </span><em><span>secuencia de DynamoDB</span></em><span>.</span></p><p><span>Este enfoque de arquitectura ofrece varios beneficios:</span></p><ul><li><span>Cada función de Lambda lleva a cabo una única función específica. Esta práctica hace que el código sea más simple y, también, más fácil de mantener.</span></li><li><span>Se puede agregar lógica de negocio adicional mediante la creación de funciones adicionales de Lambda. Cada función opera de forma independiente, por lo que la funcionalidad existente no se ve afectada.</span></li></ul><p><span>En esta tarea, creará otra función de Lambda que observe el inventario mientras se carga en la tabla de DynamoDB. Si la función de Lambda detecta que un artículo se queda sin existencias, enviará una notificación a través del tema de SNS que creó antes.</span></p><p><img src="images/module-13-guided-lab-task-5.png" referrerpolicy="no-referrer" alt="Prueba de carga"></p><ol start='36' ><li><span>En el menú </span><span id="ssb_services"><span>Services (Servicios)</span><i class="fas fa-angle-down"></i></span><span>, elija </span><strong><span>Lambda</span></strong><span>.</span></li><li><span>Elija </span><span id="ssb_lambda_orange"><span>Create function</span></span><span> (Crear función) y configure estos ajustes:</span></li></ol><ul><li><p><strong><span>Function name</span></strong><span> (Nombre de la función): </span><code>Check-Stock (Verificar-Existencias)</code></p></li><li><p><strong><span>Runtime</span></strong><span> (Tiempo de ejecución): </span><em><span>Python 3.7</span></em></p></li><li><p><span>Amplíe </span><i class="fas fa-caret-right"></i><span> </span><strong><span>Choose or create an execution role</span></strong><span> (Elegir o crear un rol de ejecución).</span></p></li><li><p><strong><span>Execution role</span></strong><span> (Rol de ejecución): </span><em><span>Use an existing role (Utilizar un rol existente)</span></em></p></li><li><p><strong><span>Existing role</span></strong><span> (Rol existente): </span><em><span>Lambda-Check-Stock-Role (Rol-Verificar-Existencias-de-Lambda)</span></em></p></li><li><p><span>Elija </span><span id="ssb_lambda_orange"><span>Create function</span></span><span> (Crear función).</span></p><p><span>Este rol se ha configurado con los permisos para enviar una notificación a Amazon SNS.</span></p></li></ul><ol start='38' ><li><p><span>Desplácese hacia abajo hasta la sección </span><strong><span>Function code</span></strong><span> (Código de la función) y, luego, elimine todo el código que aparece en el editor de código.</span></p></li><li><p><span>Copie el código siguiente y, en el editor del </span><strong><span>Function code</span></strong><span> (Código de la función), pegue el código que copió:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Stock Check Lambda function</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># This function is triggered when values are inserted into the Inventory DynamoDB table.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Inventory counts are checked and if an item is out of stock, a notification is sent to an SNS Topic.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">import json, boto3</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># This handler is run every time the Lambda function is triggered</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">def lambda_handler(event, context):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># Show the incoming event in the debug log</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  print(<span class="cm-string">"Event received by Lambda function: "</span> <span class="cm-operator">+</span> json.dumps(event, <span class="cm-def">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># For each inventory item added, check if the count is zero</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">for</span> record <span class="cm-keyword">in</span> event[<span class="cm-string">'Records'</span>]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  newImage <span class="cm-operator">=</span> record[<span class="cm-string">'dynamodb'</span>].get(<span class="cm-string">'NewImage'</span>, None)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> newImage: &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  count <span class="cm-operator">=</span> int(record[<span class="cm-string">'dynamodb'</span>][<span class="cm-string">'NewImage'</span>][<span class="cm-string">'Count'</span>][<span class="cm-string">'N'</span>]) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> count <span class="cm-operator">==</span> <span class="cm-number">0</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  store <span class="cm-operator">=</span> record[<span class="cm-string">'dynamodb'</span>][<span class="cm-string">'NewImage'</span>][<span class="cm-string">'Store'</span>][<span class="cm-string">'S'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  item &nbsp;<span class="cm-operator">=</span> record[<span class="cm-string">'dynamodb'</span>][<span class="cm-string">'NewImage'</span>][<span class="cm-string">'Item'</span>][<span class="cm-string">'S'</span>] &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Construct message to be sent</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  message <span class="cm-operator">=</span> store <span class="cm-operator">+</span> <span class="cm-string">' is out of stock of '</span> <span class="cm-operator">+</span> item</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  print(message) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Connect to SNS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  sns <span class="cm-operator">=</span> boto3.client(<span class="cm-string">'sns'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  alertTopic <span class="cm-operator">=</span> <span class="cm-string">'NoStock'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  snsTopicArn <span class="cm-operator">=</span> [t[<span class="cm-string">'TopicArn'</span>] <span class="cm-keyword">for</span> t <span class="cm-keyword">in</span> sns.list_topics()[<span class="cm-string">'Topics'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> t[<span class="cm-string">'TopicArn'</span>].lower().endswith(<span class="cm-string">':'</span> <span class="cm-operator">+</span> alertTopic.lower())][0] &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Send message to SNS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  sns.publish(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">TopicArn</span><span class="cm-operator">=</span>snsTopicArn,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">Message</span><span class="cm-operator">=</span>message,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">Subject</span><span class="cm-operator">=</span><span class="cm-string">'Inventory Alert!'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">MessageStructure</span><span class="cm-operator">=</span><span class="cm-string">'raw'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># Finished!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  return <span class="cm-string">'Successfully processed {} records.'</span>.format(len(event[<span class="cm-string">'Records'</span>]))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 829px;"></div><div class="CodeMirror-gutters" style="display: none; height: 829px;"></div></div></div></pre><p><span>Examine el código. Este realiza los siguientes pasos:</span></p><ul><li><span>Ejecuta un bucle en los registros entrantes</span></li><li><span>Si el recuento de inventario es cero, envía un mensaje al tema de SNS </span><em><span>NoStock</span></em></li></ul><p><span>Ahora configurará la función para que se desencadene cuando se agreguen datos a la tabla </span><em><span>Inventory</span></em><span> de DynamoDB.</span></p></li><li><p><span>Desplácese hasta la sección </span><strong><span>Designer</span></strong><span> (Diseñador) ubicada en la parte superior de la página.</span></p></li><li><p><span>Elija </span><span id="ssb_lambda_white"><i class="fas fa-plus"></i><span>Add trigger (Agregar desencadenador)</span></span><span> y, a continuación, configure estos ajustes:</span></p></li></ol><ul><li><strong><span>Select a trigger</span></strong><span> (Seleccionar un desencadenador): </span><em><span>DynamoDB</span></em></li><li><strong><span>DynamoDB Table</span></strong><span> (Tabla de DynamoDB): </span><em><span>Inventory</span></em></li><li><span>Elija </span><span id="ssb_lambda_orange"><span>Add</span></span><span> (Agregar)</span></li></ul><ol start='42' ><li><span>En la parte superior de la página, elija </span><span id="ssb_lambda_orange"><span>Save</span></span><span> (Guardar).</span></li></ol><p><span>   Ya está listo para probar el sistema.</span></p><br><h2 id='tarea 6-probar-el-sistema'><span>Tarea 6: Probar el sistema</span></h2><p><span>Ahora cargará un archivo de inventario en Amazon S3, lo que desencadenará la función original </span><em><span>Load-Inventory</span></em><span> (Cargar-Inventario). Esta función cargará los datos en DynamoDB, lo que luego activará la nueva función de Lambda </span><em><span>Check-Stock</span></em><span> (Verificar-Existencias). Si la función de Lambda detecta un artículo con inventario igual a cero, enviará un mensaje a Amazon SNS. A continuación, Amazon SNS lo notificará por SMS o email.</span></p><ol start='43' ><li><span>En el menú </span><span id="ssb_services"><span>Services (Servicios)</span><i class="fas fa-angle-down"></i></span><span>, elija </span><strong><span>S3</span></strong><span>.</span></li><li><span>Elija el nombre de su bucket </span><em><span>inventory-</span><number><span>(inventario-)</span></em><span>.</span></li><li><span>Elija </span><strong><span>Upload</span></strong><span> (Cargar) y cargue un archivo de inventario diferente.</span></li><li><span>Regrese al </span><strong><span>Inventory System Dashboard</span></strong><span> (Panel del sistema de inventario) y actualice </span><i class="fas fa-sync"></i><span> la página.</span></li></ol><p><span>   Ahora debería poder utilizar el menú </span><strong><span>Store (Almacén)</span></strong><span> para ver el inventario de ambos almacenes.</span></p><p><span>   Además, debería recibir una </span><em><span>notificación por SMS o email</span></em><span> en la cual se indique que hay un artículo agotado en el almacén (cada archivo de inventario tiene un artículo que se ha quedado sin existencias).</span></p><p><span>   </span><i class="fas fa-comment"></i><span> Si no recibe ninguna notificación, espere unos minutos y cargue un archivo de inventario diferente. A veces, el desencadenador de DynamoDB puede demorar algunos minutos en habilitarse.</span></p><ol start='47' ><li><span>Intente cargar varios archivos de inventario al mismo tiempo. ¿Qué cree que sucederá?</span></li></ol><br><h2 id='envío-de-su-trabajo'><span>Envío de su trabajo</span></h2><ol start='48' ><li><span>En la parte superior de estas instrucciones, elija </span><span id="ssb_blue"><span>Submit</span></span><span> (Enviar) para registrar su progreso y, cuando se le indique, elija </span><strong><span>Yes</span></strong><span> (Sí).</span></li><li><span>Si los resultados no se muestran después de algunos minutos, vuelva a la parte superior de estas instrucciones y elija </span><span id="ssb_voc_grey"><span>Grades</span></span><span> (Resultados).</span></li></ol><p><span>   </span><strong><span>Sugerencia</span></strong><span>: Puede enviar su trabajo varias veces. Después de realizar las modificaciones pertinentes, vuelva a elegir </span><strong><span>Submit</span></strong><span> (Enviar). Su último envío es el que se registrará para este laboratorio.</span></p><ol start='50' ><li><span>Para encontrar comentarios detallados sobre su trabajo, elija </span><span id="ssb_voc_grey"><span>Details</span></span><span> (Detalles) seguido de </span><i class="fas fa-caret-right"></i><span> </span><strong><span>View Submission Report</span></strong><span> (Ver informe de envío).</span></li></ol><br><h2 id='fin-del-laboratorio-i-classfas-fa-graduation-capi'><span>Fin del laboratorio </span><i class="fas fa-graduation-cap"></i></h2><p><i class="fas fa-flag-checkered"></i><span> ¡Felicitaciones! Ha completado el laboratorio.</span></p><ol start='51' ><li><span>Elija </span><span id="ssb_voc_grey"><span>End Lab</span></span><span> (Finalizar laboratorio), en la parte superior de esta página, y, a continuación, seleccione </span><span id="ssb_blue"><span>Yes</span></span><span> (Sí) para confirmar que desea finalizar el laboratorio.</span></li></ol><p><span>   Un panel presentará el mensaje </span><em><span>DELETE has been initiated… You may close this message box now (Se ha iniciado la ELIMINACIÓN… Ya puede cerrar este cuadro de mensaje)</span></em><span>.</span></p><ol start='52' ><li><span>Seleccione la </span><strong><span>X</span></strong><span> de la esquina superior derecha para cerrar el panel.</span></li></ol><p>&nbsp;</p><p>&nbsp;</p><p><em><span>© 2020 Amazon Web Services, Inc. y sus empresas afiliadas. Todos los derechos reservados. Este contenido no puede reproducirse ni redistribuirse, total ni parcialmente, sin el permiso previo por escrito de Amazon Web Services, Inc. Queda prohibida la copia, el préstamo y la venta de carácter comercial.</span></em></p></div></div>
</body>
</html>