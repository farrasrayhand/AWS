# モジュール 3 - ガイド付きラボ: 静的ウェブサイトのホスティング
[//]: # "SKU: ILT-TF-200-ACACAD-2    Source Course: ILT-TF-100-ARCHIT-6 branch dev_65"

## ラボの概要と目標
静的ウェブサイトは変化しないコンテンツで構成されており、バックエンド処理は必要ありません。HTML ページ、画像、スタイルシートをはじめ、ウェブサイトを表示するのに必要なすべてのファイルを含めることができますが、サーバー側のスクリプトやデータベースを使用することはありません。そのため静的ウェブページに対話性を与えたりプログラミングロジックを実行したりする場合は、ユーザーのウェブブラウザ内で実行される JavaScript を使用することになります。

コンテンツをアップロードしてパブリックアクセスを可能にすることにより、Amazon Simple Storage Service (Amazon S3) で静的ウェブサイトを簡単にホストできます。サーバーは必要ありません。Amazon S3 を使用すると、ウェブのどんな場所からでもあらゆる量のデータをいつでも保存、取得することができます。

このラボを完了すると、次のことができるようになります。

- Amazon S3 でバケットを作成する
- バケットにコンテンツをアップロードする
- バケットオブジェクトへのアクセスを有効にする
- ウェブサイトを更新する

<br/>

## 所要時間

このラボは、修了までに約 **20 分**かかります。

<br/>

## AWS サービスの制限事項

このラボ環境では、AWS のサービスとサービスアクションへのアクセスが、ラボの手順を完了するために必要なものに制限されています。他のサービスへのアクセスや、このラボで説明されているサービス以外のアクションを実行しようとすると、エラーが発生することがあります。

<br/>

## AWS マネジメントコンソールにアクセスする

1. この手順の上部にある <span id="ssb_voc_grey">Start Lab</span> をクリックし、ラボを起動します。

   [**Start Lab**] パネルが開き、ラボのステータスが表示されます。

   <i class="fas fa-info-circle"></i> **ヒント**: ラボの完了までにさらに時間が必要な場合は、<span id="ssb_voc_grey">Start Lab</span> ボタンをもう一度選択して、この環境のタイマーを再開します。

2. \[**Start Lab**] パネルに **Lab status: ready** というメッセージが表示されたら [**X**] をクリックしてパネルを閉じます。

3. この手順の上部にある <span id="ssb_voc_grey"> AWS </span> をクリックします。

   このアクションにより、新しいブラウザタブで AWS マネジメントコンソールが開き、ユーザーは自動的にログインします。

   <i class="fas fa-exclamation-triangle"></i> **ヒント**: 新しいブラウザタブが開かない場合、通常、ブラウザによってサイトのポップアップウィンドウの表示がブロックされたというメッセージが表示されたバナーまたはアイコンがブラウザの上部に表示されます。バナーまたはアイコンを選択して [**ポップアップを許可**] を選択してください。

4. **AWS マネジメントコンソール**タブがこの手順と並べて表示されるようにします。両方のブラウザタブを同時に開いておくと、ラボのステップを実行しやすくなります。

   <i class="fas fa-exclamation-triangle"></i> **特に指示がない限り、リージョンを変更しないでください**。

<br/>

## タスク 1: Amazon S3 でバケットを作成する

このタスクでは、S3 バケットを作成し、静的ウェブサイトのホスティング用に設定します。

5. **AWS マネジメントコンソール**の <span id="ssb_services">サービス <i class="fas fa-angle-down"></i></span> で [**S3**] をクリックします。

6. <span id="ssb_orange">バケットを作成</span> をクリックします。

   S3 バケット名はグローバルに一意であり、名前空間はすべての AWS アカウントによって共有されています。バケットを作成すると、そのバケットの名前はバケットが削除されるまで、どの AWS リージョン内の別の AWS アカウントでも使用できません。

   そのため、このラボでは **website-123** などのランダムな数字を含むバケット名を使用します。

7. \[**バケット名**] に `website-<123>` と入力します（ <**123**> の部分はランダムな数字で置き換え）。

   デフォルトでは、バケットへのパブリックアクセスはブロックされています。静的ウェブサイトのファイルでは、インターネット経由のアクセスを可能にする必要があるため、パブリックアクセスを許可する必要があります。

8. \[**パブリックアクセスをすべて ブロック**] チェックボックスをオフにしてから、[**現在の設定により、このバケットとバケット内のオブジェクトがパブリックになる可能性があることを承認します。**] チェックボックスをオンにします。

9. <span id="ssb_orange">バケットを作成</span> をクリックします。

   タグを使用すると、プロジェクトコード、コストセンター、所有者などの情報をバケットに追加できます。

10. \[**新しいバケットの名前**]をクリックします。

11. \[**プロパティ**] タブをクリックします。

12. \[**タグ**] パネルまでスクロールします。

13. <span id="ssb_white">編集する</span>、<span id="ssb_white">タグの追加</span> の順にクリックして、以下を入力します。

* **キー:** `Department`
* **値:** `Marketing`

14. <span id="ssb_orange">変更の保存</span> をクリックしてタグを保存します。

これで、静的ウェブサイトのホスティング向けにバケットを設定できるようになりました。

15. \[**プロパティ**] コンソールにとどまります。

16. \[**静的ウェブサイトのホスティング**] パネルまでスクロールします。

17. <span id="ssb_white">編集する</span> をクリックします。

18. 次のように設定します。

   - **静的ウェブホスティング:** 有効にする
   - **ホスティングタイプ:** 静的ウェブサイトをホストする
   - **インデックスドキュメント:** `index.html`
      - **注**: すでに表示されていても、この値を入力する必要があります。
   - **エラードキュメント:** `error.html`

19. <span id="ssb_orange">変更の保存</span> をクリックします。

20. \[**バケットウェブサイトエンドポイント**] の下にあるリンクをクリックします。

   バケットのアクセス許可がまだ設定されていないため、**403 Forbidden** メッセージが表示されます。このタブをウェブブラウザで開いたままにしておくと、後からこのページに戻ることができます。

   バケットは、静的ウェブサイトをホストするように設定されました。

<br/>

## タスク 2: バケットにコンテンツをアップロードする

このタスクでは、静的ファイルをバケットにアップロードします。

21. これらのリンクをそれぞれ右クリックして、コンピュータにファイルをダウンロードします。

<i class="fas fa-exclamation-triangle"></i>各ファイル名は、拡張子を含めて変更しないでください。

    - [index.html](../../../scripts/index.html)
    - [script.js](../../../scripts/script.js)
    - [style.css](../../../scripts/style.css)

22. Amazon S3 コンソールに戻り、[**オブジェクト**] タブをクリックします。

23. <span id="ssb_orange">アップロード</span> をクリックします。

24. <span id="ssb_white">ファイルを追加</span> をクリックします。

25. ダウンロードした 3 つのファイルを選択します。

26. ファイルを選択したら、<span id="ssb_orange">アップロード</span> をクリックします。

27. <span id="ssb_white">終了</span> をクリックします。

ファイルがバケットにアップロードされます。

<br/>

## タスク 3: オブジェクトへのアクセスを有効にする

デフォルトでは、Amazon S3 に保存されたオブジェクトはプライベートになります。これにより、組織のデータのセキュリティが確保されます。

このタスクでは、アップロードされたオブジェクトをパブリックアクセス可能にします。

最初に、オブジェクトがプライベートになっていることを確認します。

28. *403 Forbidden* メッセージが表示されたブラウザタブに戻ります。

29. ウェブページを更新<i class="fas fa-sync"></i>します。

    <i class="fas fa-comment"></i>誤ってこのタブを閉じてしまった場合は、[**プロパティ**] タブに移動し、[**静的ウェブサイトホスティング**] パネルの [**バケットウェブサイトエンドポイント**] リンクをもう一度クリックします。

    依然として **403 Forbidden** メッセージが表示されます。このメッセージが表示されるのは、通常の動作です。これは、静的ウェブサイトが Amazon S3 によってホストされているが、コンテンツはプライベートであることを示しています。

    Amazon S3 オブジェクトをパブリックにする方法は 2 つあります。

     - **バケットポリシー**を使用して、バケット全体をパブリックにするか、バケット内の特定のディレクトリをパブリックにします。
     - **アクセスコントロールリスト (ACL)** を使用して、バケット内の個々のオブジェクトをパブリックにします。

    通常は、他のオブジェクトを誤ってパブリックにしてしまわないように、**個々のオブジェクト**をパブリックにする方が安全です。ただし、バケット全体に機密情報が含まれていないのであれば、**バケットポリシー**を使用できます。

    ここでは、個々のオブジェクトをパブリックアクセス可能に設定します。

30. Amazon S3 コンソールのウェブブラウザタブに戻ります（ただし、ウェブサイトのタブは閉じないでください）。

31. 3 つのオブジェクトを <i class="far fa-check-square"></i> すべて選択します。

32. <span id="ssb_s3_blue">アクション <i class="fas fa-angle-down"></i></span> ドロップダウンメニューから [**公開する**] を選択します。

    3 つのオブジェクトのリストが表示されます。

33. <span id="ssb_s3_blue">公開する</span> をクリックします。

    これで、静的ウェブサイトがパブリックにアクセスできるようになりました。

34. **403 Forbidden** メッセージが表示されたウェブブラウザタブに戻ります。

35. ウェブページを <i class="fas fa-sync"></i> 更新します。

    これで、Amazon S3 によってホストされている静的ウェブサイトが表示されます。

<br/>

## タスク 4: ウェブサイトを更新する

HTML ファイルを編集して S3 バケットに再びアップロードすることで、ウェブサイトを変更できます。

Amazon S3 は_オブジェクトストレージサービス_であるため、ファイル全体をアップロードする必要があります。このアクションにより、バケット内の既存のオブジェクトが置き換えられます。オブジェクトのコンテンツを編集することはできません。代わりに、オブジェクト全体を置き換える必要があります。

36. コンピュータで、**index.html** ファイルをテキストエディタ（メモ帳や TextEdit など）に読み込みます。

37. **Served from Amazon S3** というテキストを検索し、`Created by <YOUR-NAME>`（<**YOUR-NAME**>は自分の名前）に置き換えます（例: **Created by Jane**）。

38. ファイルを保存します。

39. Amazon S3 コンソールに戻り、先ほど編集した **index.html** ファイルをアップロードします。

40. <i class="far fa-check-square"></i> **index.html**  を選択し、[**アクション**] ドリップダウンメニューから [**公開する**] オプションをもう一度選択します。

41. 静的ウェブサイトを開いているウェブブラウザタブに戻り、ページを更新<i class="fas fa-sync"></i>します。

    これで、名前がページに表示されます。



静的ウェブサイトがインターネットからアクセス可能になりました。このウェブサイトは Amazon S3 でホストされているため可用性が高く、サーバーを使用せずに大量のトラフィックを処理できます。

また、独自のドメイン名を使用して、Amazon S3 でホストされている静的ウェブサイトにユーザーを誘導することもできます。そのために、Amazon Route 53 ドメインネームシステム (DNS) サービスを Amazon S3 と組み合わせて使用することができます。

<br/>

## 作業内容を送信する

42. この手順の上部にある <span id="ssb_blue">Submit</span> をクリックして進捗情報を記録し、プロンプトが表示されたら [**Yes**] をクリックします。

43. 数分経っても結果が表示されない場合は、この手順の上部に戻り、<span id="ssb_voc_grey">Grades</span> をクリックします。

    **ヒント**: 作業内容は何度も送信できます。作業内容を変更したら、再度 [**Submit**] をクリックします。最終送信分がこのラボの作業内容として記録されます。

44. 作業に関する詳細なフィードバックを参照するには、<span id="ssb_voc_grey">Details </span> ドロップダウンメニューから <i class="fas fa-caret-right"></i> **View Submission Report** を選択します。

<br/>

## ラボの終了<i class="fas fa-graduation-cap"></i>

<i class="fas fa-flag-checkered"></i>お疲れ様でした。以上でラボは終了です。

45. ラボを終了するには、このページの上部にある <span id="ssb_voc_grey">End Lab</span> をクリックし、<span id="ssb_blue">Yes</span> をクリックします。

    パネルに **DELETE has been initiated... You may close this message box now** というメッセージが表示されます。

46. 右上隅の [**X**] をクリックしてパネルを閉じます。



**©2020 Amazon Web Services, Inc. and its affiliates. All rights reserved. このトレーニング内容の全体または一部を複製または再配布することは、Amazon Web Services, Inc. の書面による事前の許可がある場合を除き、禁じられています。商業目的のコピー、貸与、または販売を禁止します。**
